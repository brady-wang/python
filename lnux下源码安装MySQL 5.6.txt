lnux下源码安装MySQL 5.6

nux下源码安装MySQL 5.6
 

说明：本文是我自己测试的MySQL5.6源码安装，经本人亲自实践，完全可用，另在5.6之前的版本也是可以按照本文源码安装的。我是在两台linux下一台安装5.5，另一台安装5.6同时进行的，差别基本不大。
1.安装make编译器
make编译器下载地址：http://www.gnu.org/software/make/
 
（系统默认自带）查看自己的系统是否安装某个软件,如果已经有了，就不用在安装了，但是也有可能之前被卸载了。
如果你之前是使用rpm -ivh make装的，用
# rpm -qa | grep make肯定是能够找到的。
如果你是用
make && make install装的。那么最好直接去找执行程序，就知道有没装上去
# find / -name matlab
如果装了，它会告诉你执行程序被释放到哪个目录了。
++++++++++++++++++++++++++++++++++++++++++
# rpm -qa 是查看该软件是否被安装，# grep和# find是查看文件位置
++++++++++++++++++++++++++++++++++++++++++
 
# tar zxvf make-3.82.tar.gz 
# cd make-3.82 
# ./configure 
# make 
# make install 
 
 
2.安装bison
bison下载地址：http://www.gnu.org/software/bison/
 
 
# tar zxvf bison-2.5.tar.gz 
# cd bison-2.5 
# ./configure 
# make 
# make install 
3.安装gcc-c++
gcc-c++下载地址：http://www.gnu.org/software/gcc/
 
# tar zxvf gcc-c++-4.4.4.tar.gz 
# cd gcc-c++-4.4.4 
#./configure 
# make 
# make install 
4.安装cmake
cmake下载地址：http://www.cmake.org/
 
# tar zxvf cmake-2.8.4.tar.gz 
# cd cmake-2.8.4 
#./configure 
# make 
# make install 
5.安装ncurses
ncurses下载地址：http://www.gnu.org/software/ncurses/
 
# tar zxvf ncurses-5.8.tar.gz 
# cd ncurses-5.8 
#./configure 
# make 
# make install 
6.开始安装MySQL
MySQL5.6下载地址：http://dev.mysql.com/ 
这里我在这里下载的mysql-5.6.12.tar.gz
ftp://mirror.switch.ch/mirror/mysql/Downloads/MySQL-5.6/
准备工作
# groupadd mysql 
# useradd mysql -g mysql -M -s /sbin/nologin 
#增加一个名为 mysql的用户。
-g：指定新用户所属的用户组(group)
-M：不建立根目录
-s：定义其使用的shell，/sbin/nologin代表用户不能登录系统。
 
解压并安装MySQL
# tar zxvf mysql-5.6.12.tar.gz 
# cd mysql-5.6.12 
# cmake ./
# -DCMAKE_INSTALL_PREFIX=/usr/local/mysql          \    #安装路径
# -DMYSQL_DATADIR=/usr/local/mysql/data            \    #数据文件存放位置
# -DSYSCONFDIR=/etc                                \    #my.cnf路径
# -DWITH_MYISAM_STORAGE_ENGINE=1                   \    #支持MyIASM引擎
# -DWITH_INNOBASE_STORAGE_ENGINE=1                 \    #支持InnoDB引擎
# -DWITH_MEMORY_STORAGE_ENGINE=1                   \    #支持Memory引擎
# -DWITH_READLINE=1                                \    #快捷键功能(我没用过)
# -DMYSQL_UNIX_ADDR=/tmp/mysqld.sock               \    #连接数据库socket路径
# -DMYSQL_TCP_PORT=3306                            \    #端口
# -DENABLED_LOCAL_INFILE=1                         \    #允许从本地导入数据
# -DWITH_PARTITION_STORAGE_ENGINE=1                \    #安装支持数据库分区
# -DEXTRA_CHARSETS=all                             \    #安装所有的字符集
# -DDEFAULT_CHARSET=utf8                           \    #默认字符
# -DDEFAULT_COLLATION=utf8_general_ci
 
 
# make 
# make install 
7.完成后，继续下面的操作
# cd /usr/local/mysql 
# chown -R mysql:mysql .    (#这里最后是有个.的大家要注意# 为了安全安装完成后请修改权限给root用户)
# scripts/mysql_install_db --user=mysql    (先进行这一步再做如下权限的修改)
# chown -R root:mysql .     (将权限设置给root用户，并设置给mysql组， 取消其他用户的读写执行权限，仅留给mysql "rx"读执行权限，其他用户无任何权限)
# chown -R mysql:mysql ./data    (数据库存放目录设置成mysql用户mysql组)
# chmod -R ug+rwx  .     (赋予读写执行权限，其他用户权限一律删除仅给mysql用户权限)
 
下面的命令是将mysql的配置文件拷贝到/etc
# cp support-files/my-default.cnf  /etc/my.cnf
（5.6之前的版本用如下命令）
# cp support-files/my-medium.cnf /etc/my.cnf  （5.6之前的版本是此操作，读者也可在此时自己进入support-files文件夹下面，看是配置文件的真正名称，那个存在，就拷贝那个。。）
修改my.cnf配置
   # vi /etc/my.cnf
    
#[mysqld] 下面添加：
 user=mysql
    datadir=/data/mysql
 default-storage-engine=MyISAM
 
8.启动mysql
# bin/mysqld_safe --user=mysql &        或者直接进入bin文件夹下面
# cd bin
#./mysqld                              \ 这里说明，mysqld_safe或者mysqld都可以启动的
启动mysql，看是否成功 
# ps –ef|grep mysql
 
 
# netstat -tnl|grep 3306 

 
上面是一种启动mysql的方法，还有一种简单的方便，如下：
将mysql的启动服务添加到系统服务中 
# cp support-files/mysql.server  /etc/init.d/mysql 
现在可以使用下面的命令启动mysql 
# service mysql start 
停止mysql服务 
# service mysql stop 
重启mysql服务 
# service mysql restart 
 
 
9.修改root用户密码
 
# chkconfig --add mysql
修改默认root账户密码，默认密码为空
修改密码 cd 切换到mysql所在目录
# cd /usr/local/mysql
# ./bin/mysqladmin -u root password
回车在接下来的提示中设置新密码即可。。

 
最后
# service mysql restart;              (重启mysql服务器)
# cd /usr/local/mysql/bin/        （进入mysql basedir下面的bin中）
# ./mysql                                （开启客户端）

 
测试一下

 
Perfect！！！！！

