MYSQL开启慢查询日志实施
查看当前服务器是否开启慢查询：1、快速办法，运行sql语句show VARIABLES like "%slow%" 2、直接去my.conf中查看。my.conf中的配置(放在[mysqld]下的下方加入)[mysqld]log-slow-queries = /usr/local/mysql/var/slowquery.loglong_query_time = 1  #单位是秒log-queries-not-using-indexes使用sql语句来修改：不能按照my.conf中的项来修改的。修改通过"show VARIABLES like "%slow%" "语句列出来的变量，运行如下sql：set global log_slow_queries = ON;set global slow_query_log = ON;set global long_query_time=0.1; #设置大于0.1s的sql语句记录下来慢查询日志文件的信息格式：# Time: 130905 14:15:59         时间是2013年9月5日 14:15:59(前面部分容易看错哦,乍看以为是时间戳)# User@Host: root[root] @  [183.239.28.174]  请求mysql服务器的客户端ip# Query_time: 0.735883  Lock_time: 0.000078 Rows_sent: 262  Rows_examined: 262 这里表示执行用时多少秒，0.735883秒，1秒等于1000毫秒SET timestamp=1378361759;  这目前我还不知道干嘛用的show tables from `test_db`; 这个就是关键信息，指明了当时执行的是这条语句
设置毫秒级别与mysql版本的关系很多网上资料显示，5.21之前的版本，在my.conf中的long_query_time最小只能设置为1(也就是最小1秒)。我自己歪打误撞，发现我通过其他方式可以实现。
"long_query_time = 0.1"这种方式我没试，因为数据库服务器在跑。需要重启。所以没试。我是通过全局变量设置实现慢日志查询记录的。可以通过全局变量设置方式实现毫秒级别记录：set global long_query_time = 0.01我服务器上mysql版本为：5.1.60-log我试过这种方式有效。怎么测试自己的查询是否会被记录下来呢？运行语句select sleep(0.13);我故意设置0.13秒延迟，然后这条语句按照预期(因为之前设置超过0.1秒)会被记录到日志文件中去。
