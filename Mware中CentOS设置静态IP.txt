Mware中CentOS设置静态IP
Mware中CentOS设置静态IP
 


因为之前搭建的MongoDB分片没有采用副本集，最近现网压力较大，所以准备研究一下，于是在自己电脑的虚拟机中搭建环境，但是发现之前VMware设置的是DHCP，所以每次重新resume后虚拟机中IP都变了，导致之前已经搭建好的mongodb环境老是出问题又要重新搭建很麻烦，所以设置一下静态静态IP，步骤很简单：
首先关闭VMware的DHCP：
Edit->Virtual Network Editor

选择VMnet8，去掉Use local DHCP service to distribute IP address to VMs选项。点击NAT Settings查看一下GATEWAY地址：

点击OK就可以了。
 
设置CentOS静态IP：
涉及到三个配置文件，分别是：

/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-eth0
/etc/resolv.conf

 首先修改/etc/sysconfig/network如下：

NETWORKING=yes
HOSTNAME=localhost.localdomain
GATEWAY=192.168.129.2

指定网关地址。
然后修改/etc/sysconfig/network-scripts/ifcfg-eth0：


DEVICE="eth0"
#BOOTPROTO="dhcp"
BOOTPROTO="static"
IPADDR=192.168.129.129
NETMASK=255.255.255.0
HWADDR="00:0C:29:56:8F:AD"
IPV6INIT="no"
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
UUID="ba48a4c0-f33d-4e05-98bd-248b01691c20"
DNS1=192.168.129.2


注意：这里DNS1是必须要设置的否则无法进行域名解析。
最后配置下/etc/resolv.conf：

nameserver 192.168.129.2

其实这一步可以省掉，上面设置了DNS Server的地址后系统会自动修改这个配置文件。
 
这样很简单几个步骤后虚拟机的IP就一直是192.168.129.129了。


