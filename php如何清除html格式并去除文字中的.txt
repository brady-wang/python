php如何清除html格式并去除文字中的空格然后截取文字

PHP如何清除html格式并去除文字中的空格然后截取文字，详细分享一下处理方法（顺便对PHP清除HTML字符串的函数做了一个小结）：
htmlspecialchars 将特殊字元转成 HTML格式语法: string htmlspecialchars(string string);传回值: 字串函式种类: 资料处理内容说明 本函式将特殊字元转成 HTML 的字串格式 ( &....; )。最常用到的场合可能就是处理客户留言的留言版了。& (和) 转成 &amp; " (双引号) 转成 &quot; < (小于) 转成 &lt; > (大于) 转成 &gt; 此函式只转换上面的特殊字元，并不会全部转换成 HTML 所定的 ASCII 转换。
htmlentities 将所有的字元都转成 HTML 字串语法: string htmlentities(string string); 传回值: 字串 函式种类: 资料处理 内容说明 本函式有点像 htmlspecialchars() 函式，但本函式会将所有 string 的字元都转成 HTML的特殊字集字串。不过在转换后阅读网页原始码的方面，会有很多困扰，尤其是网页原始码的中文字会变得不知所云，浏览器上看到的还是正常的。
strip_tags($str) 去掉 HTML 及 PHP 的标记语法: string strip_tags(string str); 传回值: 字串 函式种类: 资料处理 内容说明 :本函式可去掉字串中包含的任何 HTML 及 PHP 的标记字串。若是字串的 HTML 及 PHP 标签原来就有错，例如少了大于的符号，则也会传回错误。
PHP去除html、css样式、js格式的方法很多，但根据经验发现，它们基本都有一个弊端：基本都清除不掉文字中包含的空格或者tab键，经过不断的探索，终于找到了一个理想的去除html字符并且能够去除空格，css样式和js 的PHP函数。
PHP清除html、css、js格式并去除空格的PHP函数


查看代码
 
打印






01
function cutstr_html($string,$length=0,$ellipsis='…'){








02
    $string=strip_tags($string);








03
    $string=preg_replace('/\n/is','',$string);








04
    $string=preg_replace('/ |　/is','',$string);








05
    $string=preg_replace('/&nbsp;/is','',$string);








06
    preg_match_all("/[\x01-\x7f]|[\xc2-\xdf][\x80-\xbf]|\xe0[\xa0-\xbf][\x80-\xbf]|[\xe1-\xef][\x80-\xbf][\x80-\xbf]|\xf0[\x90-\xbf][\x80-\xbf][\x80-\xbf]|[\xf1-\xf7][\x80-\xbf][\x80-\xbf][\x80-\xbf]/",$string,$string);








07
    if(is_array($string)&&!empty($string[0])){








08
        if(is_numeric($length)&&$length){








09
            $string=join('',array_slice($string[0],0,$length)).$ellipsis;








10
        }else{








11
            $string=implode('',$string[0]);








12
        }








13
    }else{








14
        $string='';








15
    }








16
    return $string;








17
}






php 去除html标签 js 和 css样式


查看代码
 
打印






01
function clearHtml($content){








02
    $content=preg_replace("/<a[^>]*>/i","",$content);








03
    $content=preg_replace("/<\/a>/i","",$content);








04
    $content=preg_replace("/<div[^>]*>/i","",$content);








05
    $content=preg_replace("/<\/div>/i","",$content);








06
    $content=preg_replace("/<!--[^>]*-->/i","",$content);//注释内容    








07
    $content=preg_replace("/style=.+?['|\"]/i",'',$content);//去除样式    








08
    $content=preg_replace("/class=.+?['|\"]/i",'',$content);//去除样式    








09
    $content=preg_replace("/id=.+?['|\"]/i",'',$content);//去除样式       








10
    $content=preg_replace("/lang=.+?['|\"]/i",'',$content);//去除样式        








11
    $content=preg_replace("/width=.+?['|\"]/i",'',$content);//去除样式     








12
    $content=preg_replace("/height=.+?['|\"]/i",'',$content);//去除样式     








13
    $content=preg_replace("/border=.+?['|\"]/i",'',$content);//去除样式     








14
    $content=preg_replace("/face=.+?['|\"]/i",'',$content);//去除样式     








15
    $content=preg_replace("/face=.+?['|\"]/",'',$content);//去除样式 只允许小写 正则匹配没有带 i 参数  








16
    return $content;








17
}






 

 
